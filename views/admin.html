<!DOCTYPE html>
<html lang="uz">
<head>
    <meta charset="UTF-8">
    <title>Admin Panel ‚Äî Foydalanuvchilar | Green Cyber</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        :root {
            --bg: #121212; /* To'q qora fon */
            --main: #1d1d1d; /* Neumorfizm fon */
            --primary: #00ff41; /* Kiber yashil */
            --secondary: #00b330;
            --text-light: #e0e0e0;
            --text-muted: #888;
            --radius: 15px;
            --shadow-light: rgba(255, 255, 255, 0.05);
            --shadow-dark: rgba(0, 0, 0, 0.8);
        }

        body {
            background-color: var(--bg);
            color: var(--text-light);
            font-family: 'Poppins', sans-serif;
            min-height: 100vh;
            padding-bottom: 50px;
        }

        /* Umumiy konteyner */
        .container {
            background-color: var(--main);
            border-radius: var(--radius);
            padding: 30px;
            box-shadow: inset 5px 5px 10px var(--shadow-dark), inset -5px -5px 10px var(--shadow-light);
            margin-top: 50px;
        }

        h2 {
            color: var(--primary);
            font-family: 'Orbitron', sans-serif;
            font-weight: 700;
            text-align: center;
            margin-bottom: 40px;
            text-shadow: 0 0 10px var(--primary);
            letter-spacing: 2px;
        }

        /* Foydalanuvchi kartasi - Neumorfizm */
        .card {
            background: var(--main);
            border-radius: var(--radius);
            border: none;
            box-shadow: 8px 8px 16px var(--shadow-dark), -8px -8px 16px var(--shadow-light);
            transition: all 0.4s ease;
            color: var(--text-light);
            overflow: hidden;
            position: relative;
        }

        .card:hover {
            box-shadow: 4px 4px 8px var(--shadow-dark), -4px -4px 8px var(--shadow-light), 0 0 20px var(--primary); /* Engil bosing va yashil nur */
            transform: translateY(-2px);
        }

        /* Profil rasmi uchun placeholder */
        .profile-placeholder {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            background: var(--main);
            border: 2px solid var(--primary);
            margin: 0 auto 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: inset 4px 4px 8px var(--shadow-dark), inset -4px -4px 8px var(--shadow-light);
            position: relative;
        }

        .profile-placeholder i {
            font-size: 40px;
            color: var(--primary);
            text-shadow: 0 0 5px var(--primary);
        }

        /* Kartochka ichidagi matn */
        .card h5 {
            font-family: 'Orbitron', sans-serif;
            color: var(--primary);
            margin-bottom: 5px;
        }

        .card p {
            color: var(--text-muted);
            font-size: 0.9rem;
        }

        /* Modal uslubi */
        .modal-content {
            background-color: var(--main);
            color: var(--text-light);
            border-radius: var(--radius);
            border: 1px solid var(--secondary);
            box-shadow: 0 0 30px rgba(0, 255, 65, 0.4);
        }

        .modal-header {
            border-bottom: 1px solid var(--secondary);
        }

        .modal-title {
            color: var(--primary);
            font-family: 'Orbitron', sans-serif;
        }

        /* Footer */
        footer {
            text-align: center;
            color: var(--text-muted);
            margin-top: 50px;
            font-size: 0.9rem;
            position: relative;
        }

        /* Kiber animatsiya */
        .scanline {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 3px;
            background: linear-gradient(to right, transparent 50%, var(--primary) 50%);
            background-size: 200% 100%;
            animation: scan 6s infinite linear;
            opacity: 0.1;
            z-index: 1000;
            pointer-events: none;
        }

        @keyframes scan {
            0% { transform: translateY(0); }
            100% { transform: translateY(100vh); }
        }

        .glitch {
            text-shadow: 1px 0 0 red, -1px 0 0 blue;
            animation: glitch 10s infinite alternate;
        }

        @keyframes glitch {
            0% { text-shadow: 1px 0 0 red, -1px 0 0 blue; }
            10% { text-shadow: 5px 0 0 red, -5px 0 0 blue; }
            20% { text-shadow: 1px 0 0 red, -1px 0 0 blue; }
            100% { text-shadow: 1px 0 0 red, -1px 0 0 blue; }
        }
    </style>
</head>

<body>
<div class="scanline"></div>

<div class="container">
    <h2 class="glitch">üõ°Ô∏è ADMIN PANEL ‚Äî FOYDALANUVCHILAR üíª</h2>

    <div class="row">
        {{range .Admins}}
            <div class="col-md-4 col-lg-3 mb-4">
                <div class="card text-center p-4 h-100 user-card" data-id="{{.ID}}">
                    <div class="profile-placeholder">
                        <i class="fas fa-user-tie"></i>
                    </div>
                    <h5>{{.Email}}</h5>
                    <p>{{.Role}}</p>
                </div>
            </div>
        {{end}}
        <div class="col-md-4 col-lg-3 mb-4">
            <div class="card text-center p-4 h-100 user-card" data-id="1">
                <div class="profile-placeholder"><i class="fas fa-user-tie"></i></div>
                <h5>admin@mail.uz</h5>
                <p>SuperAdmin</p>
            </div>
        </div>
        <div class="col-md-4 col-lg-3 mb-4">
            <div class="card text-center p-4 h-100 user-card" data-id="2">
                <div class="profile-placeholder"><i class="fas fa-user-tie"></i></div>
                <h5>user1@mail.uz</h5>
                <p>Moderator</p>
            </div>
        </div>
        <div class="col-md-4 col-lg-3 mb-4">
            <div class="card text-center p-4 h-100 user-card" data-id="3">
                <div class="profile-placeholder"><i class="fas fa-user-tie"></i></div>
                <h5>test@mail.uz</h5>
                <p>Operator</p>
            </div>
        </div>
    </div>

    <div class="modal fade" id="userModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="userName">Foydalanuvchi Ma'lumotlari</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <p><b>Email:</b> <span id="userEmail"></span></p>
                    <p><b>Username:</b> <span id="userUsername"></span></p>
                    <p><b>Ro‚Äòyxatdan o‚Äòtgan sana:</b> <span id="userCreated"></span></p>
                    <p><b>Rol:</b> <span id="userRole"></span></p>
                </div>
            </div>
        </div>
    </div>

    <footer>
        <p>üìä 2025 Admin Panel. Dizayn: <span style="color: var(--primary);">Green Cyber Neumorphism</span></p>
    </footer>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script>
    document.querySelectorAll('.user-card').forEach(card => {
        card.addEventListener('click', async () => {
            const userId = card.getAttribute('data-id');
            // Mock Data (o'rniga haqiqiy fetch qo'ying)
            const mockData = {
                1: { name: "Alijon Valiyev", email: "admin@mail.uz", username: "super_ali", role: "SuperAdmin", createdAt: "2024-01-10" },
                2: { name: "Botir Qodirov", email: "user1@mail.uz", username: "botir_mod", role: "Moderator", createdAt: "2024-05-15" },
                3: { name: "Lola Tursunova", email: "test@mail.uz", username: "lola_oper", role: "Operator", createdAt: "2024-11-01" }
            };

            try {
                // Haqiqiy fetch o'rniga:
                // const res = await fetch(`/admin/user?id=${userId}`);
                // if (!res.ok) throw new Error("Server javobi noto‚Äòg‚Äòri");
                // const data = await res.json();

                const data = mockData[userId] || { name: "Noma'lum", email: "Noma'lum", username: "Noma'lum", role: "Noma'lum", createdAt: "Noma'lum" };

                document.getElementById('userName').textContent = data.name + ' Detallari';
                document.getElementById('userEmail').textContent = data.email;
                document.getElementById('userUsername').textContent = data.username;
                document.getElementById('userCreated').textContent = data.createdAt;
                document.getElementById('userRole').textContent = data.role; // Rolni ham qo'shdik

                new bootstrap.Modal(document.getElementById('userModal')).show();
            } catch (err) {
                console.error(err);
                alert("‚ùå Xatolik yuz berdi: " + err.message);
            }
        });
    });
</script>
</body>
</html>
